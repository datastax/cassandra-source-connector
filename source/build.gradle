plugins {
    id 'java-library'
    id "com.github.johnrengelman.shadow"
}

println  "Root project:   ${project.rootProject}";
println  "  rootDir:      ${project.rootDir}"
println  "  projectDir:   ${project.projectDir}";
println  "  project dir:  ${System.getProperty("user.dir")}";

/* DO NOT WORK ON GITHUB ACTION
task versionTxt()  {
    doFirst {
        new File(project.projectDir, "src/main/resources/cassandra-source-version.properties")
                .text = "$project.version\n"
    }
}

compileJava {
    dependsOn versionTxt
}
*/


compileTestJava {
    options.compilerArgs += '-parameters'
}

dependencies {
    implementation("com.github.ben-manes.caffeine:caffeine:${caffeineVersion}")
    implementation("io.vavr:vavr:${vavrVersion}")
    implementation("com.datastax.oss:java-driver-core:${ossDriverVersion}")
    implementation("com.datastax.oss:java-driver-query-builder:${ossDriverVersion}")
    implementation("org.apache.kafka:connect-api:${kafkaVersion}")
    implementation("com.google.guava:guava:${guavaVersion}")
    api("com.datastax.oss:messaging-connectors-commons-core:1.0.12-SNAPSHOT")

    testImplementation("io.confluent:kafka-connect-avro-converter:${confluentVersion}")
    testImplementation("com.datastax.oss:dsbulk-tests:1.6.0")
    testImplementation("org.reactivestreams:reactive-streams:1.0.3")
    testImplementation("org.junit.jupiter:junit-jupiter-params:5.7.2")
    testImplementation("org.junit.jupiter:junit-jupiter-api:5.7.2")
    testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:5.7.2")
}



